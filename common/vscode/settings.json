{
  // Default formatters
  "[css]": { "editor.suggest.insertMode": "replace" },
  "[go]": { "editor.defaultFormatter": "golang.go" },
  "[html]": { "editor.defaultFormatter": "esbenp.prettier-vscode" },
  "[javascript]": { "editor.defaultFormatter": "esbenp.prettier-vscode" },
  "[nix]": { "editor.defaultFormatter": "jnoortheen.nix-ide" },
  "[powershell]": { "editor.defaultFormatter": "ms-vscode.powershell" },
  "[prisma]": { "editor.defaultFormatter": "Prisma.prisma" },
  "[rust]": { "editor.defaultFormatter": "rust-lang.rust-analyzer" },
  "[xml]": { "editor.defaultFormatter": "DotJoshJohnson.xml" },

  "audioCues.lineHasInlineSuggestion": "off",

  "breadcrumbs.filePath": "off",
  "breadcrumbs.symbolPath": "on",

  "diffEditor.codeLens": true,
  "diffEditor.ignoreTrimWhitespace": false,

  // Editor
  "editor.acceptSuggestionOnEnter": "on",
  "editor.bracketPairColorization.enabled": true,
  "editor.codeActionsOnSave": {
    "source.addMissingImports": true,
    "source.fixAll": true,
    "source.organizeimports": false,
    "source.sortimports": true
  },
  "editor.cursorBlinking": "solid",
  "editor.cursorSmoothCaretAnimation": "on",
  "editor.cursorSurroundingLines": 4,
  "editor.cursorWidth": 3,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.find.cursorMoveOnType": true,
  "editor.foldingHighlight": false,
  "editor.fontFamily": "'JetBrainsMono Nerd Font Mono',Consolas, 'Courier New', monospace",
  "editor.fontLigatures": true,
  "editor.fontSize": 14,
  "editor.fontWeight": "normal",
  "editor.formatOnPaste": true,
  "editor.formatOnSaveMode": "modificationsIfAvailable",
  "editor.formatOnSave": true,
  "editor.glyphMargin": false,
  "editor.gotoLocation.multipleDefinitions": "goto",
  "editor.guides.bracketPairs": "active",
  "editor.guides.highlightActiveBracketPair": false,
  "editor.inlayHints.enabled": "on",
  "editor.inlineSuggest.enabled": true,
  "editor.lineHeight": 24,
  "editor.lineNumbers": "relative",
  "editor.linkedEditing": true,
  "editor.matchBrackets": "always",
  "editor.minimap.autohide": true,
  "editor.minimap.enabled": false,
  "editor.minimap.renderCharacters": false,
  "editor.minimap.scale": 2,
  "editor.minimap.showSlider": "always",
  "editor.mouseWheelScrollSensitivity": 1.5,
  "editor.mouseWheelZoom": true,
  "editor.occurrencesHighlight": false,
  "editor.overviewRulerBorder": false,
  "editor.padding.top": 2,
  "editor.quickSuggestionsDelay": 0,
  "editor.scrollbar.horizontal": "auto",
  "editor.scrollbar.vertical": "hidden",
  "editor.semanticHighlighting.enabled": true,
  "editor.showFoldingControls": "always",
  "editor.smoothScrolling": true,
  "editor.stickyTabStops": true,
  "editor.suggest.insertMode": "replace",
  "editor.suggest.localityBonus": true,
  "editor.suggest.matchOnWordStartOnly": false,
  "editor.suggest.preview": false,
  "editor.suggestSelection": "recentlyUsedByPrefix",
  "editor.suggest.shareSuggestSelections": true,
  "editor.suggest.showInlineDetails": true,
  "editor.suggest.snippetsPreventQuickSuggestions": false,
  "editor.tabCompletion": "off",
  "editor.tabSize": 2,
  "editor.wordWrap": "on",

  "emmet.includeLanguages": { "javascript": "javascriptreact" },
  "emmet.useInlineCompletions": false,

  // Error lens
  "errorLens.enabledDiagnosticLevels": ["warning", "info", "hint", "error"],
  "errorLens.fontWeight": "100",
  "errorLens.scrollbarHackEnabled": true,

  "explorer.compactFolders": false,
  "explorer.confirmDelete": false,
  "explorer.fileNesting.enabled": true,
  "explorer.incrementalNaming": "smart",

  "extensions.autoUpdate": "onlyEnabledExtensions",
  "extensions.ignoreRecommendations": false,

  "files.associations": { "*.ahk": "ahk2" },
  "files.defaultLanguage": "markdown",
  "files.exclude": { "**/node_modules": true },
  "files.hotExit": "onExitAndWindowClose",
  "files.trimTrailingWhitespace": true,
  "files.watcherExclude": {
    "**/.git/objects/**": true,
    "**/.git/subtree-cache/**": true,
    "**/node_modules/*/**": true,
    "**/.hg/store/**": true
  },
  "files.eol": "\n",

  "git.openRepositoryInParentFolders": "never",

  "javascript.format.semicolons": "insert",
  "javascript.preferences.importModuleSpecifier": "relative",
  "javascript.suggest.completeFunctionCalls": true,
  "javascript.updateImportsOnFileMove.enabled": "always",

  "json.format.enable": true,

  "liveServer.settings.donotShowInfoMsg": true,
  "liveServer.settings.donotVerifyTags": true,

  "markdown.preview.lineHeight": 1.5,
  "markdown.validate.enabled": true,

  "powershell.promptToUpdatePowerShell": false,
  "powershell.powerShellAdditionalExePaths": {
    "Powershell 7": "/etc/profiles/per-user/keshav/bin/pwsh" // For some reason it does not auto-detect in nixos
  },

  "projectManager.git.baseFolders": ["$home"],
  "projectManager.sortList": "Recent",

  "search.collapseResults": "auto",
  "search.defaultViewMode": "list",
  "search.quickOpen.includeHistory": false,
  "search.searchEditor.doubleClickBehaviour": "openLocationToSide",
  "search.seedWithNearestWord": true,
  "search.showLineNumbers": true,

  "security.workspace.trust.banner": "never",
  "security.workspace.trust.untrustedFiles": "open",

  // Terminal
  "terminal.integrated.confirmOnExit": "hasChildProcesses",
  "terminal.integrated.copyOnSelection": true,
  "terminal.integrated.cursorStyle": "line",
  "terminal.integrated.defaultProfile.windows": "PowerShell",
  "terminal.integrated.enableMultiLinePasteWarning": false,
  "terminal.integrated.fontFamily": "JetBrainsMono Nerd Font Mono",
  "terminal.integrated.fontSize": 14,
  "terminal.integrated.fontWeight": "normal",
  "terminal.integrated.gpuAcceleration": "on",
  "terminal.integrated.profiles.windows": {
    "PowerShell": { "icon": "terminal-powershell", "source": "PowerShell" }
  },
  "terminal.integrated.shellIntegration.decorationsEnabled": "never",
  "terminal.integrated.showExitAlert": false,
  "terminal.integrated.smoothScrolling": true,
  "terminal.integrated.tabs.enableAnimation": false,

  "timeline.pageOnScroll": true,

  "typescript.preferences.importModuleSpecifier": "relative",
  "typescript.suggest.completeFunctionCalls": true,
  "typescript.updateImportsOnFileMove.enabled": "always",

  // Vim
  "vim.enableNeovim": true,
  "vim.foldfix": true,
  "vim.handleKeys": {
    "<C-d>": true,
    "<C-s>": false,
    "<C-z>": false,
    "<C-f>": false
  },
  "vim.highlightedyank.duration": 40,
  "vim.highlightedyank.enable": true,
  "vim.hlsearch": false,
  "vim.incsearch": true,
  "vim.leader": "<space>",
  "vim.mouseSelectionGoesIntoVisualMode": true,
  "vim.neovimPath": "/etc/profiles/per-user/keshav/bin/nvim",
  "vim.normalModeKeyBindingsNonRecursive": [
    // Splits
    { "before": ["leader", "v"], "commands": [":vsplit"], "silent": true },
    { "before": ["leader", "V"], "commands": [":split"], "silent": true },

    // Search
    {
      "before": ["leader", "s", "f"],
      "commands": ["workbench.action.quickOpen"],
      "silent": true
    },
    {
      "before": ["leader", "s", "b"],
      "commands": ["workbench.action.showEditorsInActiveGroup"],
      "silent": true
    },
    {
      "before": ["leader", "s", "r"],
      "commands": ["workbench.action.openrecent"],
      "silent": true
    },
    {
      "before": ["leader", "s", "l"],
      "commands": ["fuzzySearch.activeTextEditorWithCurrentSelection"],
      "silent": true
    },

    // Save with or without formatting
    {
      "before": ["leader", "w"],
      "commands": ["workbench.action.files.save"],
      "silent": true
    },
    {
      "before": ["leader", "W"],
      "commands": ["workbench.action.files.saveWithoutFormatting"],
      "silent": true
    },

    // Nice to haves
    { "before": ["leader", "w"], "commands": [":w!"], "silent": true },
    { "before": ["leader", "q"], "commands": [":q!"], "silent": true },
    { "before": ["leader", "x"], "commands": [":x!"], "silent": true },
    {
      "before": ["leader", "X"],
      "commands": ["workbench.action.closeOtherEditors"],
      "silent": true
    },

    // Navigate splits
    {
      "before": ["leader", "j"],
      "commands": ["workbench.action.focusBelowGroup"],
      "silent": true
    },
    {
      "before": ["leader", "k"],
      "commands": ["workbench.action.focusAboveGroup"],
      "silent": true
    },

    // TODO: Paste without copying selection (Does not work as of now)
    { "before": ["leader", "p"], "after": ["\"_", "d", "P"], "silent": true },

    // Select next occurence of selected word
    { "before": ["<c-n>"], "after": ["g", "b"], "silent": true },

    // FIXME: Todo tree does not seem to work
    {
      "before": ["leader", "t"],
      "commands": ["todo-tree-view.focus"],
      "silent": true
    },

    // Cycle through diagnostics
    {
      "before": ["[", "d"],
      "commands": ["editor.action.marker.prev"],
      "silent": true
    },
    {
      "before": ["]", "d"],
      "commands": ["editor.action.marker.next"],
      "silent": true
    },

    // Cycle through tabs
    { "before": ["H"], "commands": [":bprev"], "silent": true },
    { "before": ["L"], "commands": [":bnext"], "silent": true },

    // Go to start/end of line
    { "after": ["^"], "before": ["g", "h"], "silent": true },
    { "after": ["$"], "before": ["g", "l"], "silent": true },

    // Center cursor
    { "after": ["<c-d>", "z", "z"], "before": ["<c-d>"], "silent": true },
    { "after": ["<c-u>", "z", "z"], "before": ["<c-u>"], "silent": true },
    { "after": ["n", "z", "z"], "before": ["n"], "silent": true },
    { "after": ["N", "z", "z"], "before": ["N"], "silent": true },
    { "after": ["*", "z", "z"], "before": ["*"], "silent": true },
    { "after": ["#", "z", "z"], "before": ["#"], "silent": true },
    { "after": ["g*", "z", "z"], "before": ["g*"], "silent": true },
    { "after": ["g#", "z", "z"], "before": ["g#"], "silent": true },

    // Toggle boolean
    {
      "before": ["leader", "i"],
      "commands": ["extension.toggleBool"],
      "silent": true
    },

    // Open/toggle file explorer
    {
      "before": ["leader", "e"],
      "commands": ["workbench.action.toggleSidebarVisibility"],
      "silent": true
    },

    // Lsp stuff
    {
      "before": ["leader", "r"],
      "commands": ["editor.action.rename"],
      "silent": true
    },
    {
      "before": ["<leader>", "c", "a"],
      "commands": ["editor.action.quickFix"],
      "silent": true
    },
    {
      "before": ["K"],
      "commands": ["editor.action.showDefinitionPreviewHover"],
      "silent": true
    },
    {
      "before": ["g", "D"],
      "commands": ["editor.action.revealDefinitionAside"],
      "silent": true
    }
  ],
  "vim.surround": true,
  "vim.useCtrlKeys": true,
  "vim.useSystemClipboard": true,
  "vim.visualModeKeyBindings": [
    // Indent continuosly
    { "before": ["<"], "commands": ["editor.action.outdentLines"] },
    { "before": [">"], "commands": ["editor.action.indentLines"] },

    // Move lines up/down
    { "before": ["K"], "commands": ["editor.action.moveLinesUpAction"] },
    { "before": ["J"], "commands": ["editor.action.moveLinesDownAction"] },

    // Go to start/end of line
    { "after": ["^"], "before": ["g", "h"], "silent": true },
    { "after": ["$"], "before": ["g", "l"], "silent": true }
  ],
  "vim.visualModeKeyBindingsNonRecursive": [
    { "before": ["<c-n>"], "after": ["g", "b"] } // Select next occurence of selected word
  ],
  "vim.visualstar": true,

  "window.autoDetectHighContrast": false,
  "window.customMenuBarAltFocus": false,
  "window.commandCenter": false,
  "window.enableMenuBarMnemonics": false,
  "window.menuBarVisibility": "toggle",
  "window.openFoldersInNewWindow": "on",
  "window.restoreFullscreen": true,

  "workbench.activityBar.visible": false,
  "workbench.colorTheme": "Gruvbox Material Dark",
  "workbench.editorAssociations": { "*.docx": "default" },
  "workbench.editor.enablePreview": true,
  "workbench.editor.limit.enabled": true,
  "workbench.editor.pinnedTabSizing": "compact",
  "workbench.editor.tabCloseButton": "off",
  "workbench.editor.tabSizing": "shrink",
  "workbench.editor.untitled.hint": "hidden",
  "workbench.editor.untitled.labelFormat": "content",
  "workbench.editor.wrapTabs": true,
  "workbench.layoutControl.enabled": false,
  "workbench.list.smoothScrolling": true,
  "workbench.settings.editor": "json",
  "workbench.sideBar.location": "right",
  "workbench.startupEditor": "none", // looks nice but can't see vim commands/search
  "workbench.tree.indent": 12,
  "workbench.tree.renderIndentGuides": "none",

  "zenMode.fullScreen": false,
  "zenMode.hideLineNumbers": false,
  "window.zoomLevel": 1,

  "json.schemas": [
    {
      "fileMatch": ["komorebi.json"],
      "url": "https://raw.githubusercontent.com/LGUG2Z/komorebi/master/schema.json"
    }
  ],
  "AutoHotkey2.InterpreterPath": "C:\\Users\\skesh\\AppData\\Local\\Programs\\AutoHotkey\\v2\\AutoHotkey64.exe"
}
